---
title: "A Polytomous Scoring Approach Based on Item Response Time"
description: |
  In this post, we introduce an easy and practical way to deal with not-reached items in a low-stakes assessment. First, we introduce a polytomous scoring approach to deal with not-reach items in computerized low-stakes assessments and then demonstrate how to implement the polytomous scoring approach using R. This approach does not make any explicit assumption regarding the association between not-reached items and student ability, but only considers optimal time use, hence engagement and effortful response behavior when dealing with not-reached items.
  ```{r, include=FALSE}
  bytes <- file.size("a-response-time-based-scoring-approach-to-handle-not-reached-items.Rmd")
  words <- bytes/10
  minutes <- words/200
  ``` 
  (`r round(minutes)` min read)
author:
  - name: Okan Bulut
    url: http://www.okanbulut.com/
    affiliation: University of Alberta
    affiliation_url: https://www.ualberta.ca
    orcid_id: 0000-0001-5853-1267
  - name: Guher Gorgun
    affiliation: University of Alberta
    affiliation_url: https://www.ualberta.ca
    orcid_id: 0000-0002-0861-9225
date: 02-09-2021
categories:
  - psychometrics
  - response time
  - IRT
preview: clock1.jpg
bibliography: polytomous.bib
output:
  distill::distill_article:
    self_contained: false
    toc: true
draft: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE, warning = FALSE, message = FALSE)
suppressWarnings({
  library("rmarkdown")
  library("kableExtra")
  library("emo")
  library("mirt")
  library("latticeExtra")
})
```

![Photo by [Veri Ivanova](https://unsplash.com/@veri_ivanova) on [Unsplash](https://unsplash.com/)](clock1.jpg)

## Introduction

Low-stakes assessments (e.g., formative assessments and progress monitoring measures in K-12) usually have no direct consequences for students. Therefore, some students may not show effortful response behavior when attempting the items on such assessments and leave
some items unanswered. These items are typically referred to as *not-reached* items. For example, some students may try to answer all of the items rapidly and complete the assessment in unrealistically short amounts of time. Oppositely, some students may spend unrealistically long amounts of time on each item and may not finish answering all of the items within the allotted time. Furthermore, students may leave items unanswered due to test speededness-the situation where the allotted time does not allow a large number of students to fully consider all items on the assessment [@lu2007].

In practice, not-reached items are often treated as either incorrect or not-administered (i.e., NA) in the estimation of item and person parameters. However, when the proportion of not-reached items is high, these approaches may yield biased parameter estimates and thereby threatening the validity of assessment results. To date, researchers proposed various model-based approaches to deal with not-reached items, such as modeling valid responses and not-reached items jointly in a tree-based item response theory (IRT) model (e.g., @debeer2017) or modeling proficiency and tendency to omit items as distinct latent traits (e.g., @pohl2014). However, these are typically complex models that would not be easy to use in operational settings. 

Response time spent on each item in an assessment is often considered as a strong proxy for students' engagement with the items (e.g., @kuhfeld2020, @pohl2019, @rios2017). To date, several researchers demonstrated the utility of response times in reducing the effects of non-effortful response behavior such as rapid guessing (e.g., @kuhfeld2020, @pohl2019, @wise2005). By identifying and removing responses where rapid guessing occurred, the accuracy of item and person parameter estimates can be improved, without having to apply a complex modeling approach. 

In this post, we will demonstrate an alternative method that considers not only students with rapid guessing behavior but also students who spend too much time on each item and thereby leaving many items unanswered. In the following sections, we will briefly describe how our approach works and then demonstrate the use of this approach in R.

## Polytomous Scoring

In our recent study [@gorgun2021], we have proposed a new scoring approach that utilizes response times to transform dichotomous responses into polytomous responses. With our scoring approach, students are able to receive a partial credit on their responses depending on how accurately and rapidly they answer the items. This approach combines the speed and accuracy in the scoring process to alleviate the negative impact of not-reached items on the estimation of item and person parameters.

To conceptualize our scoring approach, we introduce the concept of **optimal time** that refers to spending a reasonable amount of time interval when responding to an item. Optimal time allows us to make a distinction between students who spend optimal time but miss the item and students who spend too much time on the item and yet answer it incorrectly. By using response time, we group students into three categories: 

1. **Optimal time users** who answer the item using the the optimal time
2. **Rapid guessers** who answer the item in an unrealistically short amount of time, and
3. **Slow respondents** who answer the item in an unrealistically long amount of time.

If an assessment is timed, students are expected to adjust their speed to attempt as many items as possible within allotted time. Therefore, spending too little time (rapid guessers) or too much time (slow respondents) on a given item can be considered an outcome of disengaged response behavior. Our scoring approach enables assigning partial credit to optimal time users who answer the item incorrectly but spend optimal time when attempting the item. Thus, it allows to do more fine-grained analysis of response behavior. 

### How Does It Work?

The polytomous scoring approach can be applied using the following steps:

1. We separate response time for correct and incorrect responses and then find two median response times for each item: one for correct responses and another for incorrect responses. The median response time is used to avoid the outliers in the response time distribution. 

2. We use the normative threshold (NT) approach introduced by @wise2005. This process gives us two cut-off values to divide the response time distribution into three regions: optimal time users, rapid guessers, and slow respondents. For example, we can use 25% and 175% of the median response times to specify the optimal time interval^[Smaller percentages can be used for obtaining more conservative thresholds.]. 

3. After finding the cut-off points for the response time distributions for each item, we select a scoring range. Here we can choose a scoring range of 0 to 3 points or 0 to 4 points. 

    * If the scoring range is 0 to 4:
      + Based on the correct response time distribution, we assign 4 points to the fastest students, 3 points to middle region, a.k.a optimal time users, and 2 points to the slowest students. 
      + Based on the incorrect response time distribution, we assign 0 points to rapid guessers and slow respondents, and 1 point to the optimal time users. 

    * If the scoring range is 0 to 3, the same scoring rule applies for students with incorrect responses. However, for the correct response time distribution, 2 points are given to both rapid guessers and slow respondents and 3 points are assigned to optimal time users who are in the middle region of the correct response time distribution. 

4. We determine how to deal with not-reached items. We can choose to treat not-reached items as either not-administered (i.e, missing) or incorrect.

Now, let's see how the polytomous scoring approach works in R. 

## Example

To illustrate the polytomous scoring approach, we use response data from a sample of 5000 students who participated in a hypothetical assessment with 40 items. In the response data, 

  * correct responses are scored as 1,
  * incorrect responses are scored as 0,
  * not-reach items are scored with 9, and 
  * not-answered items are scored with 8^[These are items that students view but skip without selecting a valid response option.].

The data also include students' response times (in seconds) for each item. 

Let's import the data and see the responses and response times of first 3 test-takers. 

```{r, eval=FALSE}
data <- read.csv("data.csv", header = TRUE)

# Item responses
head(data[,1:40])

# Response times
head(data[,41:80])
```

```{r, eval=TRUE, echo=TRUE}
data <- read.csv("data.csv", header = TRUE)

paged_table(data[,1:40], options = list(cols.print = 12))

paged_table(data[,41:80], options = list(cols.print = 12))
```


Next, we will define a function to recode the dichotomous items and not-reached items to create polytomously scored response matrix. 

The **poly_transform** function requires the following arguments: 

*  response: A vector of students' responses to an item

*  time: A vector of students' response times on the same item

*  max.score: Max score for polytomous items (3 for 0-1-2-3 or 4 for 0-1-2-3-4)

*  na.handle: Treatment of not-reached (i.e., NA) responses. If IN, responses with NA will turn into 0 (i.e., incorrect); if NA, then responses with NA remain as NA (i.e., missing).

* correct: The default cut-off proportions are 0.25 and 1.75 for the bottom 25% and the top 75% of the median response time. 

* incorrect: The default cut-off proportions are 0.25 and 1.75 for the bottom 25% and the top 75% of the median response time. 

In the first half of the function, we specify the cut-off points or time thresholds for identifying rapid guessers, optimal time users, and slow respondents. Notice that we determine the cut-off points for correct and incorrect responses separately so that we can identify and assign partial credits to the test-takers with optimal time use regardless of whether they got the item correct or not. 
Next, the function recodes test-takers' dichotomous scores into polytomous scores (either 0 to 3 points or 0 to 4 points) based on the response time thresholds identified by the first portion of the function. 
Finally, the function handles how to deal with not-reached items. Note that not-answered items were scored as incorrect, however one can modify the function to recode not-answered items as missing (NA). 


```{r}
poly_transform <- function(response, time, max.score, na.handle = "NA",
                           not.reached, not.answered,  
                           correct = c(0.25, 1.75), incorrect = c(0.25, 1.75)) {
  
  # Find response time thresholds
  median.time.correct1 <- median(time[which(response==1)], na.rm = TRUE)*correct[1]
  median.time.correct2 <- median(time[which(response==1)], na.rm = TRUE)*correct[2]
  median.time.incorrect1 <- median(time[which(response==0)], na.rm = TRUE)*incorrect[1]
  median.time.incorrect2 <- median(time[which(response==0)], na.rm = TRUE)*incorrect[2]
  
  # Recode dichotomous responses as polytomous
  if(max.score == 3) {
    response <- ifelse(response == 1 & time < median.time.correct1, 2,
                       ifelse(response == 1 & time > median.time.correct2, 2,
                              ifelse(response == 1 & 
                                       time > median.time.correct1 & 
                                       time < median.time.correct2, 3, response)))  
    response <- ifelse(response == 0 & time < median.time.incorrect1, 0,
                       ifelse(response == 0 & time > median.time.incorrect2, 0, 
                              ifelse(response == 0 & 
                                       time > median.time.incorrect1 & 
                                       time < median.time.incorrect2, 1, response)))
  } else if (max.score == 4)  {
    response <- ifelse(response == 1 & time < median.time.correct1, 4,
                       ifelse(response == 1 & time > median.time.correct2, 2, 
                              ifelse(response == 1 & 
                                       time > median.time.correct1 & 
                                       time < median.time.correct2, 3, response)))
    response <- ifelse(response == 0 & time < median.time.incorrect1, 0,
                       ifelse(response == 0 & time > median.time.incorrect2, 0, 
                              ifelse(response == 0 & 
                                       time > median.time.incorrect1 & 
                                       time < median.time.incorrect2, 1, response)))
  }
  
  # Set not-answered responses as incorrect
  if(!is.null(not.answered)) {
    response.recoded <- ifelse(response == not.answered, 0, response)
  } else {
    response.recoded <- response
  }
  
  # Set not-reached responses as NA or incorrect
  if(na.handle == "IN") {
    response.recoded <- ifelse(response.recoded == not.reached, 0, response.recoded)
  } else {
    response.recoded <- ifelse(response.recoded == not.reached, NA, response.recoded)
  }
  
  return(response.recoded)
} 
```

After defining the **poly_transform** function, now we insert our response and response time vectors into the function. 

```{r}

dich.data <- data[,1:40]
time.data <- data[, 41:80]

```

Here, our polytomous scores are from 0 to 3 and we recoded not-reached items as incorrect.

```{r}
poly.data <- matrix(NA, nrow = nrow(dich.data), ncol = ncol(dich.data))

for(i in 1:ncol(dich.data)) {
poly.data[,i] <- poly_transform(dich.data[,i], time.data[,i], max.score = 3, 
                                na.handle = "IN", not.reached = 9, not.answered = 8,  
                                correct = c(0.25, 1.75), incorrect = c(0.25, 1.75))
} 
```

Let's quickly see how our data looks like after recoding the items. 

```{r}
poly.data<-as.data.frame(poly.data)
head(poly.data)

```

We will demonstrate how to estimate item and person parameters with item-response theory (IRT) approach. However, note that this scoring approach is flexible enough to be applied with classical test theory (CTT). When applied in the CTT framework, a high score indicates that the student's level of combined ability and engagement was high in the assessment. With this approach, speededness is no longer a nuisance variable but is used in the operationalization of ability [@tijmstra2018].

We will import the necessary packages for IRT. 

```{r message=FALSE, eval=FALSE}
library("mirt")
library("latticeExtra")
```

```{r message=FALSE}
model <- 'F = 1-40' 

### Polytomous: GRM
results.grm <- mirt(data=poly.data, model=model, itemtype="graded", SE=TRUE, verbose=FALSE)

### Item parameters 
coef.grm <- coef(results.grm, IRTpars=TRUE, simplify=TRUE)
items.grm <- as.data.frame(coef.grm$items)

### Person parameters
theta.grm <- matrix(fscores(results.grm, method='EAP'))

### Fit indices
M2(results.grm, na.rm=TRUE)
```

Finally, let's examine test information function and standard error of measurement based on the estimated person parameters using the polytomous scoring approach. 

```{r echo=FALSE}

plot(results.grm, type = 'infoSE', theta_lim = c(-4,4), lwd=2) 

```

## Conclusion

xxx


